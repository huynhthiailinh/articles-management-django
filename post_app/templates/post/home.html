{% extends 'base.html' %}
{% load static %}
{% block post_content %}

<head>
    <title>BK's news</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="{% static 'article/home.css' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
        integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
{% for post in posts %}
<article>
    <header>
        <h2>
            <a href="{% url 'post-detail' post.id %}" class="post-title">
                {{ post.title }}
            </a>
        </h2>
        <div class="entry-meta">
            <span>
                <i class="fa-solid fa-calendar-days"></i>
                {{ post.date_posted | date:"F d, Y" }}
            </span>
            <span>
                <i class="fa-solid fa-folder-open"></i>
                {{ post.topic.name }}
            </span>
            <span>
                <img class="rounded-circle account-img" src="{{ post.author.profile.avatar.url }}" alt="account-image">
                <a href="{% url 'user-posts' post.author.username %}" class="ms-auto">{{ post.author }}</a>
            </span>
        </div>
    </header>
    <div class="entry-content row">
        <img class="col-sm-6" src="https://colorlibhub.com/dazzling/wp-content/uploads/sites/54/2012/01/54-730x410.jpg"
            alt="image">
        <div class="col-sm-6">
            <p class="post-content truncate-content">
                {{ post.content }}
            </p>
        </div>
        <p>
            <a href="{% url 'post-detail' post.id %}" class="read-more">
                Tiếp tục đọc
                <i class="fa fa-chevron-right"></i>
            </a>
        </p>
    </div>
    <hr class="section-divider">
</article>
{% endfor%}
{% if is_paginated %}

{% if page_obj.has_previous %}
<a class="btn btn-outline-info mb-4" href="?page=1">Trang đầu</a>
<a class="btn btn-outline-info mb-4" href="?page={{ page_obj.previous_page_number }}">Trang trước</a>
{% endif%}

{% for num in page_obj.paginator.page_range %}
{% if page_obj.number == num %}
<a class="btn btn-outline-info mb-4" href="?page={{ num }}">{{ num }}</a>
{% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %} <a class="btn btn-outline-info mb-4"
    href="?page={{ num }}">{{ num }}</a>
    {% endif %}
    {% endfor %}

    {% if page_obj.has_next %}
    <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.next_page_number }}">Trang tiếp</a>
    <a class="btn btn-outline-info mb-4" href="?page={{ page_obj.paginator.num_pages }}">Trang cuối</a>
    {% endif%}

    {% endif%}
    {% endblock post_content %}

{% block topic_content %}
    {% include 'topic/topic_sidebar.html' %}
{% endblock topic_content %}
